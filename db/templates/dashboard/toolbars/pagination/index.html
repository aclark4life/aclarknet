{% if page_obj %}
  <div class="d-flex justify-content-start my-2">
    <form class="form">
      <div class="input-group">
        {% if page_obj.paginator.count > items_per_page %}
          {# Previous pagination buttons #}
          {% if page_obj.has_previous %}
            <a class="btn btn-outline-primary"
               href="?page=1&items_per_page={{ items_per_page }}&q={{ q }}">
              <i class="fa fa-step-backward"></i>
              <span class="visually-hidden">First page</span>
            </a>
            <a class="btn btn-outline-primary"
               href="?page={{ page_obj.previous_page_number }}&items_per_page={{ items_per_page }}&q={{ q }}">
              <i class="fa fa-chevron-circle-left"></i>
              <span class="visually-hidden">Previous page</span>
            </a>
          {% else %}
            <button class="btn btn-outline-primary" disabled>
              <i class="fa fa-step-backward"></i>
              <span class="visually-hidden">First page</span>
            </button>
            <button class="btn btn-outline-primary" disabled>
              <i class="fa fa-chevron-circle-left"></i>
              <span class="visually-hidden">Previous page</span>
            </button>
          {% endif %}
          {# Next pagination buttons #}
          {% if page_obj.has_next %}
            <a class="btn btn-outline-primary"
               href="?page={{ page_obj.next_page_number }}&items_per_page={{ items_per_page }}&q={{ q }}">
              <i class="fa fa-chevron-circle-right"></i>
              <span class="visually-hidden">Next page</span>
            </a>
            <a class="btn btn-outline-primary"
               href="?page={{ page_obj.paginator.num_pages }}&items_per_page={{ items_per_page }}&q={{ q }}">
              <i class="fa fa-step-forward"></i>
              <span class="visually-hidden">Last page</span>
            </a>
          {% else %}
            <button class="btn btn-outline-primary" disabled>
              <i class="fa fa-chevron-circle-right"></i>
              <span class="visually-hidden">Next page</span>
            </button>
            <button class="btn btn-outline-primary" disabled>
              <i class="fa fa-step-forward"></i>
              <span class="visually-hidden">Last page</span>
            </button>
          {% endif %}
        {% endif %}
        {% if page_obj.paginator %}
          {# https://stackoverflow.com/a/7405779/185820 #}
          {% if field_values_page|length|add:0 >= items_per_page %}
            <select class="form-select btn-outline-primary"
                    name="items_per_page"
                    onchange="this.form.submit()">
              <option value="10"
                      {% if request.GET.items_per_page == '10' %}selected{% endif %}>10 items per page</option>
              <option value="100"
                      {% if request.GET.items_per_page == '100' %}selected{% endif %}>100 items per page</option>
              <option value="1000"
                      {% if request.GET.items_per_page == '1000' %}selected{% endif %}>1000 items per page</option>
            </select>
          {% endif %}
        {% endif %}
        {% if page_obj.paginator %}
          {% if page_obj.paginator.count > items_per_page %}
            <a class="btn btn-outline-primary" href="?paginated=false&q={{ q }}">Show all</a>
          {% endif %}
        {% else %}
          <a class="btn btn-outline-primary" href="?paginated=true&q={{ q }}">Show paginated</a>
        {% endif %}
      </div>
      <input type="hidden" name="q" value="{{ q }}">
    </form>
  </div>
{% endif %}
