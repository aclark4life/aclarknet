{% extends 'dashboard/index.html' %}
{% load text_filters %}
{% block dashboard_title %}
  <a class="text-decoration-none text-secondary"
     href="{% url urls.url_index %}">{{ model_name_plural|title }}</a>
{% endblock %}
{% block dashhead_title %}
  <h2 class="dashhead-title">
    <a class="text-decoration-none text-secondary"
       href="{% url urls.url_index %}">{{ model_name_plural|title }}</a>
  </h2>
{% endblock %}
{% block dashboard %}
  {% with items=object_list %}
    {% include 'pagination/index.html' %}
    {% if items or page_obj %}
      <form method="post" action="{% url 'update-selected' %}">
        {% csrf_token %}
        {% include 'toolbars/selected.html' %}
        <div class="table-responsive border rounded">
          <table class="table table-striped table-hover" id="table-select">
            <thead>
              <tr>
                <th scope="col" class="not-sortable">
                  <input type="checkbox" id="select-all"/>
                  <span class="visually-hidden">Link text</span>
                </th>
                {% for field_name in table_headers %}
                  <th>{{ field_name|title_case }}</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
              {% for field_values in field_values_page %}
                {% if field_values %}
                  {% with model_name=field_values.0.1 object_id=field_values.1.1 %}
                    <tr onclick="window.location='{% url model_name|add:"_view" object_id %}'"
                        style="cursor: pointer">
                      <td onclick="event.stopPropagation();">
                        <input type="checkbox" name="entry_id" value="{{ object_id }}"/>
                      </td>
                      {% for field_name, field_value in field_values %}
                        <td>{{ field_value|format_field_value:field_name }}</td>
                      {% endfor %}
                    </tr>
                  {% endwith %}
                {% endif %}
              {% endfor %}
            </tbody>
          </table>
        </div>
      </form>
    {% else %}
      {% include 'empty.html' %}
    {% endif %}
    {% include 'pagination/index.html' %}
  {% endwith %}
{% endblock %}
